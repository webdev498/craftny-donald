(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{134:function(e,t,a){},143:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(73),o=r.a.createContext(null),c=function(e){return function(t){return r.a.createElement(o.Consumer,null,function(a){return r.a.createElement(e,Object.assign({},t,{firebase:a}))})}},i=o,l=a(4),u=a(44),m=a.n(u),p=(a(128),a(130),{apiKey:"AIzaSyDCcOz1GbHKfrIXAuAvK2h-Rc52cr7_bvw",authDomain:"craftny-test.firebaseapp.com",databaseURL:"https://craftny-test.firebaseio.com",projectId:"craftny-test",storageBucket:"craftny-test.appspot.com",messagingSenderId:"851644021256"}),h=function e(){var t=this;Object(l.a)(this,e),this.doCreateUserWithEmailAndPassword=function(e,a){return t.auth.createUserWithEmailAndPassword(e,a)},this.doSignInWithEmailAndPassword=function(e,a){return t.auth.signInWithEmailAndPassword(e,a)},this.doSignOut=function(){return t.auth.signOut()},m.a.initializeApp(p),this.auth=m.a.auth(),this.database=m.a.database()},f=(a(134),a(5)),d=a(7),v=a(6),b=a(8),E=a(146),g=a(145),O=a(26),j=a.n(O),w=a(39),y=a(74),S=a.n(y),N=a(14),C=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(d.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(r)))).state={email:""},a.onSaveFavorite=function(e){var t=a.props.firebase.auth.currentUser.email.replace("@","_").replace(".","_");a.props.firebase.database.ref("users/".concat(t,"/").concat(a.props.id)).set({url:a.props.url,title:a.props.title,author:a.props.author,created_utc:a.props.created_utc,score:a.props.score}).catch(function(e){a.setState({error:e})}),a.props.onFavorite&&a.props.onFavorite(a.props.id),e.preventDefault()},a.onRemoveFavorite=function(e){var t=a.props.firebase.auth.currentUser.email.replace("@","_").replace(".","_");a.props.firebase.database.ref("users/".concat(t,"/").concat(a.props.id)).remove().catch(function(e){a.setState({error:e})}),a.props.onRemove&&a.props.onRemove(a.props.id),e.preventDefault()},a}return Object(b.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"feed-item"},r.a.createElement("div",{className:"feed-item-image-wrapper"},this.props.isFavoriteList?r.a.createElement("i",{className:"far fa-trash-alt",onClick:this.onRemoveFavorite}):this.props.isFavorite&&!0===this.props.isFavorite?r.a.createElement("i",{className:"fas fa-heart favorited",onClick:this.onRemoveFavorite}):r.a.createElement("i",{className:"fas fa-heart",onClick:this.onSaveFavorite}),r.a.createElement("img",{src:this.props.url,alt:this.props.title,className:"feed-item-image"})),r.a.createElement("div",{className:"feed-item-title"},this.props.title),r.a.createElement("div",{className:"feed-item-meta"},r.a.createElement("span",null,r.a.createElement("i",{className:"fas fa-user"}),"/u/",this.props.author," \u2022"),r.a.createElement("span",null,r.a.createElement("i",{className:"far fa-clock"}),S()(1e3*this.props.created_utc).fromNow()," \u2022"),r.a.createElement("span",null,r.a.createElement("i",{className:"fas fa-bolt"}),this.props.score)))}}]),t}(n.Component),I=Object(N.a)(c)(C),k=function(e){function t(){return Object(l.a)(this,t),Object(d.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"body-wrap"},this.props.children)}}]),t}(n.Component),U=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(d.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(r)))).state={feedItems:[]},a.onFavorite=function(e){a.setState({feedItems:a.state.feedItems.filter(function(t){var a=t.data;return a.id===e&&(a.is_favorite=!0),!0})})},a.onRemove=function(e){a.setState({feedItems:a.state.feedItems.filter(function(t){var a=t.data;return a.id===e&&(a.is_favorite=!1),!0})})},a}return Object(b.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){this.getFeedItems()}},{key:"getFeedItems",value:function(){var e=Object(w.a)(j.a.mark(function e(){var t=this;return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://www.reddit.com/r/analog/top/.json").then(function(e){return e.json()}).then(function(e){console.log(e),t.setState({feedItems:e.data.children})}).catch(function(e){console.log(e)});case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return console.log(this.state.feedItems),r.a.createElement(k,null,r.a.createElement("div",{className:"feed-list"},this.state.feedItems.map(function(t){var a=t.data;return r.a.createElement(I,{key:a.id,id:a.id,title:a.title,url:a.url,author:a.author,created_utc:a.created_utc,score:a.score,onFavorite:e.onFavorite,onRemove:e.onRemove,isFavorite:a.is_favorite})})))}}]),t}(n.Component),F=a(147),A=function(e){function t(){return Object(l.a)(this,t),Object(d.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"body-wrap"},this.props.children)}}]),t}(n.Component),_=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(d.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(r)))).state={feedItems:[]},a.onRemove=function(e){a.setState({feedItems:a.state.feedItems.filter(function(t){return t.id!==e})})},a}return Object(b.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){this.props.firebase.auth.currentUser&&this.getFeedItems()}},{key:"getFeedItems",value:function(){var e=Object(w.a)(j.a.mark(function e(){var t,a=this;return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:console.log(this.props),t=this.props.firebase.auth.currentUser.email.replace("@","_").replace(".","_"),this.props.firebase.database.ref("users/".concat(t)).once("value").then(function(e){var t=e.val();return Object.keys(t).map(function(e){return t[e].id=e,t[e]})}).then(function(e){a.setState({feedItems:e})}).catch(function(e){console.log(e)});case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return this.props.firebase.auth.currentUser?r.a.createElement(A,null,r.a.createElement("div",{className:"feed-list"},this.state.feedItems.length>0?this.state.feedItems.map(function(t){return console.log(e.state.feedItems),r.a.createElement(I,{key:t.id,id:t.id,title:t.title,url:t.url,author:t.author,created_utc:t.created_utc,score:t.score,isFavoriteList:"true",onRemove:e.onRemove})}):r.a.createElement("div",{className:"faves-empty"},"No favorites yet."))):r.a.createElement(F.a,{to:"/signin"})}}]),t}(n.Component),R=Object(N.a)(c)(_),P=a(144),D=c(function(e){var t=e.firebase;return r.a.createElement(P.a,{to:"#",onClick:t.doSignOut},"Sign Out")}),x=function(e){var t=e.authUser;return r.a.createElement("div",{className:"nav-options"},t?r.a.createElement(W,{authUser:t}):r.a.createElement(T,null))},W=function(e){e.authUser;return r.a.createElement("div",{className:"nav-container"},r.a.createElement("div",{className:"navigation-bar"},r.a.createElement(P.a,{to:"/feed"},r.a.createElement("i",{className:"fab fa-reddit-alien"}),"/r/analog"),r.a.createElement(P.a,{to:"/favorites"},r.a.createElement("i",{className:"fas fa-heart"})," favorites")),r.a.createElement("div",{className:"nav-buttons"},r.a.createElement(D,null)))},T=function(){return r.a.createElement("div",{className:"nav-container"},r.a.createElement("div",{className:"navigation-bar"},r.a.createElement(P.a,{to:"/feed"},r.a.createElement("i",{className:"fab fa-reddit-alien"}),"/r/analog")),r.a.createElement("div",{className:"nav-buttons"},r.a.createElement(P.a,{to:"/signin"},"Sign In")))},z=function(e){return r.a.createElement("header",{className:"header"},r.a.createElement(x,{authUser:e.authUser}))},K=(a(76),a(25)),L=a(27),M=a(148),B=function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"SignUp"),r.a.createElement(X,null))},J={email:"",passwordOne:"",passwordTwo:"",error:null},G=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(d.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(r)))).state=Object(L.a)({},J),a.onSubmit=function(e){var t=a.state,n=t.email,r=t.passwordOne;a.props.firebase.doCreateUserWithEmailAndPassword(n,r).then(function(e){a.setState(Object(L.a)({},J)),a.props.history.push("/")}).catch(function(e){a.setState({error:e})}),e.preventDefault()},a.onChange=function(e){a.setState(Object(K.a)({},e.target.name,e.target.value))},a}return Object(b.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this.state,t=e.email,a=e.passwordOne,n=e.passwordTwo,s=e.error,o=a!==n||""===a||""===t;return r.a.createElement("form",{onSubmit:this.onSubmit,className:"body-wrap"},r.a.createElement("div",{class:"form-group"},r.a.createElement("label",{htmlFor:"email"},"Email"),r.a.createElement("input",{name:"email",value:t,onChange:this.onChange,type:"text",placeholder:"Email Address"})),r.a.createElement("div",{class:"form-group"},r.a.createElement("label",{htmlFor:"password"},"Password"),r.a.createElement("input",{name:"passwordOne",value:a,onChange:this.onChange,type:"password",placeholder:"Password"})),r.a.createElement("div",{class:"form-group"},r.a.createElement("label",{htmlFor:"passwordTwo"},"Confirm password"),r.a.createElement("input",{name:"passwordTwo",value:n,onChange:this.onChange,type:"password",placeholder:"Confirm Password"})),r.a.createElement("div",{class:"form-group"},r.a.createElement("button",{disabled:o,type:"submit"},"Sign Up")),r.a.createElement("div",{class:"form-group"},s&&r.a.createElement("p",null,s.message)))}}]),t}(n.Component),H=function(){return r.a.createElement("p",{className:"body-wrap"},"Don't have an account? ",r.a.createElement(P.a,{to:"/signup"},"Sign Up"))},X=Object(N.a)(M.a,c)(G),q=function(){return r.a.createElement("div",{className:"body-wrap"},r.a.createElement(Y,null),r.a.createElement(H,null))},Q={email:"",password:"",error:null},V=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(d.a)(this,Object(v.a)(t).call(this,e))).onSubmit=function(e){var t=a.state,n=t.email,r=t.password;a.props.firebase.doSignInWithEmailAndPassword(n,r).then(function(e){console.log(e),a.setState(Object(L.a)({},Q)),a.props.history.push("/")}).catch(function(e){a.setState({error:e})}),e.preventDefault()},a.onChange=function(e){a.setState(Object(K.a)({},e.target.name,e.target.value))},a.state=Object(L.a)({},Q),a}return Object(b.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this.state,t=e.email,a=e.password,n=e.error,s=""===a||""===t;return r.a.createElement("form",{onSubmit:this.onSubmit,className:"body-wrap"},r.a.createElement("input",{name:"email",value:t,onChange:this.onChange,type:"text",placeholder:"Email Address"}),r.a.createElement("input",{name:"password",value:a,onChange:this.onChange,type:"password",placeholder:"Password"}),r.a.createElement("button",{disabled:s,type:"submit"},"Sign In"),n&&r.a.createElement("p",null,n.message))}}]),t}(n.Component),Y=Object(N.a)(M.a,c)(V),Z=c(function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(d.a)(this,Object(v.a)(t).call(this,e))).state={authUser:null},a}return Object(b.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.listener=this.props.firebase.auth.onAuthStateChanged(function(t){t?e.setState({authUser:t}):e.setState({authUser:null})})}},{key:"componentWillUnmount",value:function(){this.listener()}},{key:"render",value:function(){var e=this;return r.a.createElement(E.a,{basename:"https://webdev498.github.io/craftny-donald"},r.a.createElement("div",null,r.a.createElement(z,{authUser:this.state.authUser}),r.a.createElement(g.a,{exact:!0,path:"/",component:U}),r.a.createElement(g.a,{path:"/feed",render:function(t){return r.a.createElement(U,Object.assign({},t,{authUser:e.state}))}}),r.a.createElement(g.a,{path:"/favorites",render:function(t){return r.a.createElement(R,Object.assign({},t,{authUser:e.state}))}}),r.a.createElement(g.a,{path:"/signup",component:B}),r.a.createElement(g.a,{path:"/signin",component:q}),r.a.createElement(g.a,{path:"/signout",component:D})))}}]),t}(n.Component));Object(s.render)(r.a.createElement(i.Provider,{value:new h},r.a.createElement(Z,null)),document.getElementById("root"))},77:function(e,t,a){e.exports=a(143)}},[[77,2,1]]]);
//# sourceMappingURL=main.a7133530.chunk.js.map